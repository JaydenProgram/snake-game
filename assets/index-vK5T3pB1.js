(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))p(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const S of s.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&p(S)}).observe(document,{childList:!0,subtree:!0});function o(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function p(t){if(t.ep)return;t.ep=!0;const s=o(t);fetch(t.href,s)}})();let h,v,P,O,b,i,x=600,g=600,r=25,a=25,L=Math.floor(x/2/r)*r,B=Math.floor(g/2/a)*a,c=[{x:L,y:B}],M=0,n={x:0,y:0,width:r,height:a},l={x:0,y:0,width:r,height:a},A=0,k=0;const m=3;let y=0,u=0,q=100,f=!1,w="normal";window.onload=function(){h=document.getElementById("board"),v=document.getElementById("score"),O=document.getElementById("moving-board"),P=document.getElementById("restart"),b=document.getElementById("gameModes"),h.height=g,h.width=x,i=h.getContext("2d"),I(),E(),requestAnimationFrame(F),P.addEventListener("click",T),b.addEventListener("change",H),document.addEventListener("keydown",C)};function H(){w=b.value,console.log(w),T()}function F(e){if(requestAnimationFrame(F),f)return;i.clearRect(0,0,h.width,h.height);let d=(e-A)/1e3;if(A=e,k+=d*60,k>=r/m){k=0;const o={x:c[0].x+Math.sign(y)*r,y:c[0].y+Math.sign(u)*r};R(o,n)?(E(),M++):c.pop();const p=Math.hypot(o.x-n.x,o.y-n.y);w==="magnet"&&q>p&&(n.x+=(o.x-n.x)*(5/100),n.y+=(o.y-n.y)*(5/100)),w==="enemy"&&(l.x+=(o.x-l.x)*(10/100),l.y+=(o.y-l.y)*(10/100),R(o,l)&&(f=!0)),(o.x<0||o.x>h.width-r||o.y<0||o.y>h.height-a)&&(f=!0),c.some(t=>t.x===o.x&&t.y===o.y)&&(f=!0),c.unshift(o)}i.fillStyle="black",i.font="15px sans-serif",v.innerHTML=`${M}`,f&&(v.innerHTML=`GAME OVER: ${M}`,O.style.transform="translateY(-500px)"),Y(),N(),G()}function Y(){i.fillStyle="green",c.forEach(e=>{i.fillRect(e.x,e.y,r,a),i.strokeRect(e.x,e.y,r,a)})}function E(){f||(n.x=Math.floor(Math.random()*(x/r))*r,n.y=Math.floor(Math.random()*(g/a))*a,c.some(e=>e.x===n.x&&e.y===n.y)&&E())}function G(){i.fillStyle="blue",i.beginPath(),i.arc(l.x,l.y,25,0,2*Math.PI),i.fill(),i.stroke()}function I(){f||(l.x=Math.floor(Math.random()*(x/r))*r,l.y=Math.floor(Math.random()*(g/a))*a,c.some(e=>e.x===l.x&&e.y===l.y&&n.x===l.x&&n.y===l.y)&&I())}function N(){i.fillStyle="red",i.fillRect(n.x,n.y,n.width,n.height)}function C(e){if(!f)switch(e.key){case"a":y===0&&(u=0,y=-m);break;case"d":y===0&&(u=0,y=m);break;case"w":u===0&&(y=0,u=-m);break;case"s":u===0&&(y=0,u=m);break}}function T(){O.style.transform="translateY(0px)",L=Math.floor(x/2/r)*r,B=Math.floor(g/2/a)*a,c=[{x:L,y:B}],y=0,u=0,M=0,f=!1,E(),I(),requestAnimationFrame(F)}function R(e,d){return e.x<d.x+d.width&&e.x+r>d.x&&e.y<d.y+d.height&&e.y+a>d.y}
